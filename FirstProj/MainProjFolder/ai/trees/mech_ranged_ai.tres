[gd_resource type="BehaviorTree" load_steps=63 format=3 uid="uid://vca7j8b0cpkl"]

[ext_resource type="BlackboardPlan" uid="uid://cn6i86litai7s" path="res://Component/blackboard_plans/enemy_ai.tres" id="1_57cnw"]
[ext_resource type="Script" uid="uid://w637xlbev2om" path="res://ai/tasks/find_player.gd" id="2_6mf02"]

[sub_resource type="BBVariant" id="BBVariant_glts4"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_ug3cp"]
variable = &"attack_mode"
value = SubResource("BBVariant_glts4")
custom_name = "AttackMode"

[sub_resource type="BBVariant" id="BBVariant_cdgcv"]
type = 1
saved_value = false
resource_name = "false"

[sub_resource type="BTCheckVar" id="BTCheckVar_gi0ss"]
variable = &"staggered"
value = SubResource("BBVariant_cdgcv")

[sub_resource type="BBVariant" id="BBVariant_ff6r7"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_roqn8"]
variable = &"melee_mode"
value = SubResource("BBVariant_ff6r7")

[sub_resource type="BBVariant" id="BBVariant_sdlxl"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_s0pl0"]
variable = &"within_range"
value = SubResource("BBVariant_sdlxl")

[sub_resource type="BTAction" id="BTAction_f2l8t"]
script = ExtResource("2_6mf02")
group = &"player"
target_var = &"target"

[sub_resource type="BBVariant" id="BBVariant_trp4a"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_2nwck"]
variable = &"melee_mode"
value = SubResource("BBVariant_trp4a")

[sub_resource type="BBVariant" id="BBVariant_57cnw"]
type = 1
saved_value = false
resource_name = "false"

[sub_resource type="BBNode" id="BBNode_glts4"]
saved_value = NodePath("MovementHandler")
resource_name = "MovementHandler"

[sub_resource type="BTCallMethod" id="BTCallMethod_ug3cp"]
node = SubResource("BBNode_glts4")
method = &"set_active"
args = Array[BBVariant]([SubResource("BBVariant_57cnw")])

[sub_resource type="BBNode" id="BBNode_f2l8t"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_trp4a"]
animation_player = SubResource("BBNode_f2l8t")
animation_name = &"blast_attack"

[sub_resource type="BBNode" id="BBNode_roqn8"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTAwaitAnimation" id="BTAwaitAnimation_sdlxl"]
animation_player = SubResource("BBNode_roqn8")
animation_name = &"blast_attack"

[sub_resource type="BBNode" id="BBNode_ff6r7"]
saved_value = NodePath(".")
resource_name = "."

[sub_resource type="BTCallMethod" id="BTCallMethod_roqn8"]
node = SubResource("BBNode_ff6r7")
method = &"chase"

[sub_resource type="BTSequence" id="BTSequence_57cnw"]
custom_name = "Counter"
children = [SubResource("BTPlayAnimation_trp4a"), SubResource("BTAwaitAnimation_sdlxl"), SubResource("BTCallMethod_roqn8")]

[sub_resource type="BTProbability" id="BTProbability_57cnw"]
children = [SubResource("BTSequence_57cnw")]

[sub_resource type="BBNode" id="BBNode_57cnw"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_6mf02"]
animation_player = SubResource("BBNode_57cnw")
animation_name = &"lift_off"

[sub_resource type="BBNode" id="BBNode_ug3cp"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTAwaitAnimation" id="BTAwaitAnimation_cdgcv"]
animation_player = SubResource("BBNode_ug3cp")
animation_name = &"lift_off"

[sub_resource type="BBNode" id="BBNode_6mf02"]
saved_value = NodePath(".")
resource_name = "."

[sub_resource type="BTCallMethod" id="BTCallMethod_glts4"]
node = SubResource("BBNode_6mf02")
method = &"slam_down"

[sub_resource type="BBVariant" id="BBVariant_6mf02"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BBNode" id="BBNode_cdgcv"]
saved_value = NodePath("MovementHandler")
resource_name = "MovementHandler"

[sub_resource type="BTCallMethod" id="BTCallMethod_gi0ss"]
node = SubResource("BBNode_cdgcv")
method = &"set_active"
args = Array[BBVariant]([SubResource("BBVariant_6mf02")])
_enabled = false

[sub_resource type="BBNode" id="BBNode_sdlxl"]
saved_value = NodePath(".")
resource_name = "."

[sub_resource type="BTCallMethod" id="BTCallMethod_s0pl0"]
node = SubResource("BBNode_sdlxl")
method = &"chase"

[sub_resource type="BTSequence" id="BTSequence_6mf02"]
custom_name = "Slam"
children = [SubResource("BTPlayAnimation_6mf02"), SubResource("BTAwaitAnimation_cdgcv"), SubResource("BTCallMethod_glts4"), SubResource("BTCallMethod_gi0ss"), SubResource("BTCallMethod_s0pl0")]

[sub_resource type="BTProbability" id="BTProbability_6mf02"]
run_chance = 1.0
children = [SubResource("BTSequence_6mf02")]

[sub_resource type="BTSelector" id="BTSelector_glts4"]
children = [SubResource("BTProbability_57cnw"), SubResource("BTProbability_6mf02")]

[sub_resource type="BTSequence" id="BTSequence_oqvss"]
custom_name = "Attack"
children = [SubResource("BTCheckVar_2nwck"), SubResource("BTCallMethod_ug3cp"), SubResource("BTSelector_glts4")]

[sub_resource type="BTCooldown" id="BTCooldown_38pg2"]
duration = 2.0
start_cooled = true
children = [SubResource("BTSequence_oqvss")]

[sub_resource type="BTSelector" id="BTSelector_4nrsl"]
custom_name = "attacks"
children = [SubResource("BTCooldown_38pg2")]

[sub_resource type="BTSequence" id="BTSequence_my7wn"]
custom_name = "AttackRange"
children = [SubResource("BTCheckVar_s0pl0"), SubResource("BTAction_f2l8t"), SubResource("BTSelector_4nrsl")]

[sub_resource type="BTAction" id="BTAction_d25vw"]
script = ExtResource("2_6mf02")
group = &"player"
target_var = &"target"

[sub_resource type="BBNode" id="BBNode_vynsm"]
saved_value = NodePath(".")
resource_name = "."

[sub_resource type="BTCallMethod" id="BTCallMethod_gm5h1"]
node = SubResource("BBNode_vynsm")
method = &"chase"

[sub_resource type="BTSequence" id="BTSequence_71byw"]
custom_name = "Get In Range"
children = [SubResource("BTAction_d25vw"), SubResource("BTCallMethod_gm5h1")]
_enabled = false

[sub_resource type="BTSelector" id="BTSelector_4j6sx"]
custom_name = "Getting in range"
children = [SubResource("BTSequence_my7wn"), SubResource("BTSequence_71byw")]

[sub_resource type="BTSequence" id="BTSequence_10ead"]
custom_name = "Melee"
children = [SubResource("BTCheckVar_roqn8"), SubResource("BTSelector_4j6sx")]

[sub_resource type="BBVariant" id="BBVariant_utq68"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_3yycb"]
variable = &"ranged_mode"
value = SubResource("BBVariant_utq68")

[sub_resource type="BBNode" id="BBNode_esods"]
saved_value = NodePath("ShootAttackManager")
resource_name = "ShootAttackManager"

[sub_resource type="BTCallMethod" id="BTCallMethod_vyp80"]
node = SubResource("BBNode_esods")
method = &"shoot"

[sub_resource type="BTSequence" id="BTSequence_r1cm4"]
custom_name = "Shoot"
children = [SubResource("BTCheckVar_3yycb"), SubResource("BTCallMethod_vyp80")]

[sub_resource type="BTCooldown" id="BTCooldown_n65d2"]
duration = 0.5
start_cooled = true
children = [SubResource("BTSequence_r1cm4")]
_enabled = false

[sub_resource type="BBVariant" id="BBVariant_ug3cp"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_cdgcv"]
variable = &"ranged_mode"
value = SubResource("BBVariant_ug3cp")

[sub_resource type="BTSequence" id="BTSequence_ff6r7"]
custom_name = "RangedDEBUG"
children = [SubResource("BTCheckVar_cdgcv")]

[sub_resource type="BTSelector" id="BTSelector_vjpus"]
children = [SubResource("BTSequence_10ead"), SubResource("BTCooldown_n65d2"), SubResource("BTSequence_ff6r7")]

[sub_resource type="BTSequence" id="BTSequence_ivh4q"]
children = [SubResource("BTCheckVar_gi0ss"), SubResource("BTSelector_vjpus")]

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_57cnw"]
children = [SubResource("BTSequence_ivh4q")]

[sub_resource type="BTSequence" id="BTSequence_pigy8"]
custom_name = "Attacks"
children = [SubResource("BTCheckVar_ug3cp"), SubResource("BTRepeatUntilSuccess_57cnw")]

[sub_resource type="BTSelector" id="BTSelector_8x2b1"]
children = [SubResource("BTSequence_pigy8")]

[resource]
blackboard_plan = ExtResource("1_57cnw")
root_task = SubResource("BTSelector_8x2b1")
